<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Minta</title>

<style>
html,body{
	margin:0;
	width:100%;
	height:100%;
	overflow:hidden;
	background:#050505;
	color:#fff;
	font-family:Arial, sans-serif;
}

/* ===== LAYERS ===== */
#matrix,#particles{
	position:fixed;
	inset:0;
	z-index:0;
}
#gradient{
	position:fixed;
	inset:0;
	z-index:1;
	pointer-events:none;
	transition:background .1s linear;
}
#particles{z-index:2}

/* ===== GATE ===== */
#gate{
	position:fixed;
	inset:0;
	background:rgba(0,0,0,.9);
	display:flex;
	align-items:center;
	justify-content:center;
	z-index:10;
}
#gate button{
	font-size:20px;
	padding:16px 30px;
	border:0;
	border-radius:6px;
	background:#00ccff;
	color:#fff;
	cursor:pointer;
}

/* ===== CONTENT ===== */
#content{
	position:relative;
	z-index:5;
	padding:40px;
	filter:blur(6px);
	pointer-events:none;
	transition:.3s;
}

.engineer{
	color:#ff0000;
	font-weight:600;
	text-shadow:0 0 8px #ff0000,0 0 20px #ff0000;
	animation:pulse 1.5s infinite alternate;
}
@keyframes pulse{
	from{opacity:.6}
	to{opacity:1}
}

.btn{
	padding:10px 20px;
	font-size:16px;
	background:#cc1515;
	color:#fff;
	border:0;
	border-radius:5px;
	cursor:pointer;
	margin-top:20px;
}
.btn:disabled{opacity:.5}

/* ===== AUDIO BAR ===== */
#progressWrap{
	width:320px;
	height:10px;
	background:#333;
	border-radius:5px;
	margin-top:15px;
	overflow:hidden;
}
#progressBar{
	width:0%;
	height:100%;
	background:linear-gradient(90deg,#00ffcc,#00aaff);
}

/* ===== TIMER ===== */
#timer{
	position:fixed;
	top:6px;
	right:15px;
	font-size:14px;
	z-index:20;
}
</style>
</head>

<body>

<canvas id="matrix"></canvas>
<div id="gradient"></div>
<canvas id="particles"></canvas>

<div id="gate">
	<button id="enterBtn">Click to Enter</button>
</div>

<div id="content">
	<h1>Hi</h1>
	<p>I'm Minta.R4M</p>
	<p><span class="engineer">я code engineer</span></p>

	<button id="mainBtn" class="btn">Click me</button>
	<div id="progressWrap"><div id="progressBar"></div></div>

	<audio id="bgm" src="/assets/мита.wav" loop></audio>
	<audio id="mainSound" src="/assets/ENO-soam-tan.mp3" preload="auto"></audio>
</div>

<div id="timer">Time: 0s</div>

<script>
/* ================= MATRIX ================= */
const m=document.getElementById("matrix");
const mctx=m.getContext("2d");
const chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
const fs=14;
let w,h,cols,drops;

function resize(){
	w=m.width=window.innerWidth;
	h=m.height=window.innerHeight;
	cols=Math.floor(w/22);
	drops=Array(cols).fill(0);
}
resize();
window.addEventListener("resize",resize);

function matrix(){
	mctx.fillStyle="rgba(0,0,0,.08)";
	mctx.fillRect(0,0,w,h);
	mctx.fillStyle="#00ff41";
	mctx.font=fs+"px monospace";
	drops.forEach((y,i)=>{
		const t=chars[Math.random()*chars.length|0];
		mctx.fillText(t,i*22,y*24);
		drops[i]=y*24>h&&Math.random()>.98?0:y+1;
	});
	requestAnimationFrame(matrix);
}
matrix();

/* ================= PARTICLES ================= */
const pc=document.getElementById("particles");
const pctx=pc.getContext("2d");
pc.width=window.innerWidth;
pc.height=window.innerHeight;

const particles=[...Array(120)].map(()=>({
	x:Math.random()*pc.width,
	y:Math.random()*pc.height,
	r:Math.random()*3+1,
	dx:(Math.random()-.5),
	dy:(Math.random()-.5)
}));

function drawParticles(){
	pctx.clearRect(0,0,pc.width,pc.height);
	particles.forEach(p=>{
		pctx.beginPath();
		pctx.arc(p.x,p.y,p.r,0,Math.PI*2);
		pctx.fillStyle="#00ffff";
		pctx.fill();
		p.x+=p.dx; p.y+=p.dy;
		if(p.x<0||p.x>pc.width) p.dx*=-1;
		if(p.y<0||p.y>pc.height) p.dy*=-1;
	});
	requestAnimationFrame(drawParticles);
}
drawParticles();

/* ================= AUDIO SYSTEM ================= */
const gate=document.getElementById("gate");
const enterBtn=document.getElementById("enterBtn");
const content=document.getElementById("content");
const btn=document.getElementById("mainBtn");
const bgm=document.getElementById("bgm");
const main=document.getElementById("mainSound");
const bar=document.getElementById("progressBar");
const gradient=document.getElementById("gradient");

let unlocked=false;
let playing=false;
let audioReady=false;

main.addEventListener("loadedmetadata",()=>audioReady=true);

enterBtn.onclick=()=>{
	unlocked=true;
	gate.remove();
	content.style.pointerEvents="auto";
	content.style.filter="none";
	bgm.play().catch(()=>{});
};

function updateProgress(){
	if(!playing||!audioReady) return;
	const p=main.currentTime/main.duration;
	bar.style.width=(p*100)+"%";

	const glow=.3+Math.sin(p*6)*.2;
	gradient.style.background=
	`radial-gradient(circle at 30% 30%, rgba(0,0,255,${glow}), transparent 40%),
	 radial-gradient(circle at 70% 40%, rgba(0,255,0,${glow}), transparent 45%),
	 radial-gradient(circle at 50% 80%, rgba(255,0,0,${glow}), transparent 50%)`;

	requestAnimationFrame(updateProgress);
}

btn.onclick=()=>{
	if(!unlocked||playing||!audioReady) return;
	playing=true;
	btn.disabled=true;
	bgm.pause();

	document.body.style.background="url('MicroBit/AURA.png') center/cover fixed";

	main.currentTime=0;
	main.play().then(()=>requestAnimationFrame(updateProgress))
	.catch(()=>{
		playing=false;
		btn.disabled=false;
	});
};

main.onended=()=>{
	bar.style.width="0%";
	playing=false;
	btn.disabled=false;
	bgm.play().catch(()=>{});
};

/* ================= TIMER ================= */
let t=0;
setInterval(()=>{
	t++;
	document.getElementById("timer").textContent=`Time: ${t}s`;
},1000);
</script>

</body>
</html>
