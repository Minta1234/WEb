<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Minta</title>

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  overflow:hidden;
  font-family:Arial, sans-serif;
  color:#fff;
}

/* ===== BACKGROUND ===== */
canvas{
  position:fixed;
  inset:0;
  z-index:0;
}

/* ===== ENTER GATE ===== */
#gate{
  position:fixed;
  inset:0;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:10;
}
#gate button{
  font-size:22px;
  padding:18px 36px;
  background:#00c8ff;
  border:none;
  border-radius:6px;
  cursor:pointer;
  color:#fff;
}

/* ===== CONTENT ===== */
#content{
  position:relative;
  z-index:2;
  padding:40px;
  pointer-events:none;
  filter:blur(6px);
}

button.main{
  padding:12px 24px;
  font-size:16px;
  background:#c51414;
  border:none;
  border-radius:5px;
  cursor:pointer;
  color:#fff;
}

#barWrap{
  width:300px;
  height:10px;
  background:#222;
  margin-top:15px;
  border-radius:5px;
  overflow:hidden;
}
#bar{
  width:0%;
  height:100%;
  background:linear-gradient(90deg,#00ffd5,#00aaff);
}

#time{
  position:fixed;
  top:8px;
  right:12px;
  font-size:13px;
  opacity:.8;
  z-index:5;
}
</style>
</head>

<body>

<canvas id="bg"></canvas>

<div id="gate">
  <button id="enter">Click to Enter</button>
</div>

<div id="content">
  <h1>Hi</h1>
  <p>I'm Minta</p>
  <p>Code Engineer</p>

  <button class="main" id="downloadBtn">Click me</button>

  <div id="barWrap"><div id="bar"></div></div>

  <!-- AUDIO -->
  <audio id="bgm" src="/assets/мита.wav" loop></audio>
  <audio id="fx" src="/assets/ENO-soam-tan.mp3"></audio>
</div>

<div id="time">Time: 0s</div>

<script>
/* ================= BACKGROUND ================= */
const c = document.getElementById("bg");
const ctx = c.getContext("2d");

function resize(){
  c.width = innerWidth;
  c.height = innerHeight;
}
resize();
addEventListener("resize", resize);

const dots=[];
for(let i=0;i<150;i++){
  dots.push({
    x:Math.random()*c.width,
    y:Math.random()*c.height,
    r:Math.random()*2+0.6,
    vx:(Math.random()-.5)*0.2,
    vy:(Math.random()-.5)*0.2,
    col:Math.random()<.7?"#0A1A6A":"#FF5A2A"
  });
}

function draw(){
  const g=ctx.createLinearGradient(0,0,c.width,0);
  g.addColorStop(0,"#41DFFF");
  g.addColorStop(.5,"#4FEED8");
  g.addColorStop(1,"#3CFFB6");
  ctx.fillStyle=g;
  ctx.fillRect(0,0,c.width,c.height);

  for(const p of dots){
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fillStyle=p.col;
    ctx.shadowColor=p.col;
    ctx.shadowBlur=4;
    ctx.fill();

    p.x+=p.vx; p.y+=p.vy;
    if(p.x<0)p.x=c.width;
    if(p.x>c.width)p.x=0;
    if(p.y<0)p.y=c.height;
    if(p.y>c.height)p.y=0;
  }
  requestAnimationFrame(draw);
}
draw();

/* ================= AUDIO & GATE ================= */
const gate=document.getElementById("gate");
const enter=document.getElementById("enter");
const content=document.getElementById("content");

const bgm=document.getElementById("bgm");
const fx=document.getElementById("fx");

let unlocked=false;

enter.onclick=()=>{
  if(unlocked) return;
  unlocked=true;

  gate.remove();
  content.style.pointerEvents="auto";
  content.style.filter="none";

  bgm.volume=1;
  bgm.play().catch(()=>{});
};

/* ================= DOWNLOAD ================= */
const btn=document.getElementById("downloadBtn");
const bar=document.getElementById("bar");

btn.onclick=()=>{
  if(!unlocked) return;

  bgm.pause();
  fx.currentTime=0;
  fx.play().catch(()=>{});

  /* FORCE DOWNLOAD */
  const a=document.createElement("a");
  a.href="/Download/MicroBit.zip";   // ต้องมีไฟล์นี้จริง
  a.download="VIRuS_MiTa.zip";
  document.body.appendChild(a);
  a.click();
  a.remove();
};

fx.ontimeupdate=()=>{
  if(!fx.duration) return;
  bar.style.width=(fx.currentTime/fx.duration*100)+"%";
};
fx.onended=()=>{
  bar.style.width="0%";
  bgm.play().catch(()=>{});
};

/* ================= TIMER ================= */
let sec=0;
setInterval(()=>{
  sec++;
  document.getElementById("time").textContent="Time: "+sec+"s";
},1000);
</script>

</body>
</html>
