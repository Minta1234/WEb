<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sensor Dashboard</title>

<style>
:root{
  --motion:#00c8ff;
  --env:#00ff9c;
  --bio:#ffb300;
  --other:#ff5c5c;
  --bg:#0b0e14;
}
*{box-sizing:border-box;font-family:system-ui}
body{
  margin:0;
  background:var(--bg);
  color:#eaeaea;
}
h1{
  text-align:center;
  margin:20px 0;
}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:16px;
  padding:20px;
}
.card{
  border-radius:12px;
  padding:14px;
  background:#111;
  box-shadow:0 0 15px rgba(0,0,0,.5);
  border-left:6px solid;
}
.card.off{
  opacity:.35;
  filter:grayscale(1);
}
.card h3{margin:0 0 6px}
.value{font-size:14px;opacity:.85}
canvas{
  width:100%;
  height:120px;
  background:#05070b;
  border-radius:8px;
  margin-top:8px;
}
video{display:none}
.footer{
  text-align:center;
  font-size:12px;
  opacity:.6;
  padding-bottom:20px;
}
</style>
</head>
<body>

<h1>üìä Mobile Sensor Dashboard</h1>

<div class="grid">

<!-- Motion -->
<div class="card" id="accCard" style="border-color:var(--motion)">
  <h3>Accelerometer</h3>
  <div class="value" id="accVal">Not available</div>
  <canvas id="accGraph"></canvas>
</div>

<div class="card" id="gyroCard" style="border-color:var(--motion)">
  <h3>Gyroscope</h3>
  <div class="value" id="gyroVal">Not available</div>
</div>

<div class="card off" style="border-color:var(--motion)">
  <h3>Magnetometer</h3>
  <div class="value">No Web API</div>
</div>

<!-- Environment -->
<div class="card" id="lightCard" style="border-color:var(--env)">
  <h3>Light (Camera)</h3>
  <div class="value" id="lightVal">Waiting...</div>
  <canvas id="lightGraph"></canvas>
</div>

<div class="card off" style="border-color:var(--env)">
  <h3>Barometer</h3>
  <div class="value">No Web API</div>
</div>

<div class="card off" style="border-color:var(--env)">
  <h3>Humidity</h3>
  <div class="value">No Web API</div>
</div>

<!-- Biometric -->
<div class="card off" style="border-color:var(--bio)">
  <h3>Fingerprint</h3>
  <div class="value">System level only</div>
</div>

<div class="card off" style="border-color:var(--bio)">
  <h3>Face Recognition</h3>
  <div class="value">System level only</div>
</div>

<div class="card" id="micCard" style="border-color:var(--bio)">
  <h3>Microphone</h3>
  <div class="value" id="micVal">Checking...</div>
</div>

<!-- Other -->
<div class="card" id="gpsCard" style="border-color:var(--other)">
  <h3>GPS</h3>
  <div class="value" id="gpsVal">Checking...</div>
</div>

<div class="card off" style="border-color:var(--other)">
  <h3>Proximity / Hall</h3>
  <div class="value">Not accessible via Web</div>
</div>

</div>

<video id="cam" autoplay playsinline></video>

<div class="footer">
  ‡∏™‡∏µ‡∏Å‡∏≤‡∏£‡πå‡∏î = ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå | ‡∏™‡∏µ‡πÄ‡∏ó‡∏≤ = Browser / Device ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö
</div>

<script>
/* Utility */
const disable=c=>c.classList.add("off")

/* Accelerometer */
const accCtx=accGraph.getContext("2d")
let accData=[]
if(window.DeviceMotionEvent){
  addEventListener("devicemotion",e=>{
    let a=e.accelerationIncludingGravity
    if(!a) return
    let v=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z)
    accVal.textContent=v.toFixed(2)+" m/s¬≤"
    accData.push(v); if(accData.length>60) accData.shift()
    draw(accCtx,accData,"#00c8ff")
  })
}else disable(accCard)

/* Gyroscope */
if(window.DeviceOrientationEvent){
  addEventListener("deviceorientation",e=>{
    gyroVal.textContent=`Œ±:${e.alpha?.toFixed(1)} Œ≤:${e.beta?.toFixed(1)} Œ≥:${e.gamma?.toFixed(1)}`
  })
}else disable(gyroCard)

/* Light via Camera */
const lightCtx=lightGraph.getContext("2d")
let lightData=[]
navigator.mediaDevices?.getUserMedia({video:{facingMode:"environment"}})
.then(s=>{
  cam.srcObject=s
  const c=document.createElement("canvas"),ctx=c.getContext("2d")
  setInterval(()=>{
    c.width=cam.videoWidth;c.height=cam.videoHeight
    ctx.drawImage(cam,0,0)
    let d=ctx.getImageData(0,0,c.width,c.height).data,sum=0
    for(let i=0;i<d.length;i+=4)
      sum+=(d[i]+d[i+1]+d[i+2])/3
    let lux=sum/(d.length/4)
    lightVal.textContent="Brightness ~ "+lux.toFixed(0)
    lightData.push(lux); if(lightData.length>60) lightData.shift()
    draw(lightCtx,lightData,"#00ff9c")
  },500)
}).catch(()=>disable(lightCard))

/* Microphone */
navigator.mediaDevices?.getUserMedia({audio:true})
.then(()=>micVal.textContent="Available")
.catch(()=>disable(micCard))

/* GPS */
navigator.geolocation?
navigator.geolocation.getCurrentPosition(
 p=>gpsVal.textContent=`Lat ${p.coords.latitude.toFixed(3)}`
,()=>disable(gpsCard)
):disable(gpsCard)

/* Graph */
function draw(ctx,data,color){
  ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height)
  ctx.strokeStyle=color;ctx.beginPath()
  data.forEach((v,i)=>{
    let x=i*(ctx.canvas.width/(data.length-1))
    let y=ctx.canvas.height-(v/Math.max(...data))*ctx.canvas.height
    i?ctx.lineTo(x,y):ctx.moveTo(x,y)
  })
  ctx.stroke()
}
</script>

</body>
</html>
