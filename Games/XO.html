<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>XO Tournament</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
:root{
  --bg:#050505;
  --neon:#00ffcc;
  --danger:#ff0044;
}
body{
  margin:0;
  background:var(--bg);
  color:white;
  font-family:Arial,monospace;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
#app{width:360px;text-align:center}
h1{color:var(--neon)}
input,select,button{
  width:100%;
  margin:5px 0;
  padding:10px;
  font-size:16px;
}
button{cursor:pointer}
#board{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:8px;
  margin:15px 0;
}
.cell{
  height:100px;
  font-size:48px;
  background:#111;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}
.cell.disabled{pointer-events:none;opacity:.5}
.win{
  animation:flash .2s infinite alternate;
}
@keyframes flash{
  from{background:var(--neon)}
  to{background:var(--danger)}
}
#msg{
  font-size:28px;
  height:40px;
  margin:10px 0;
}
#timer{font-size:20px;color:#ffaa00}
.hidden{display:none}
</style>
</head>
<body>
<div id="app">
<h1>XO Tournament</h1>

<div id="setup">
<input id="p1" placeholder="Player 1 name" value="P1">
<input id="p2" placeholder="Player 2 / AI" value="AI">
<select id="mode">
  <option value="pvp">2 Player</option>
  <option value="ai">VS AI</option>
</select>
<select id="level">
  <option value="easy">AI Easy</option>
  <option value="hard">AI Hard</option>
  <option value="extreme">AI Extreme</option>
</select>
<button id="start">START</button>
</div>

<div id="msg"></div>
<div id="timer"></div>

<div id="board"></div>

<button id="reset" class="hidden">RESET</button>

<audio id="sndWin" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-complete-2059.mp3"></audio>
<audio id="sndTurn" src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3"></audio>
<audio id="sndWarn" src="https://assets.mixkit.co/sfx/preview/mixkit-warning-alarm-buzzer-991.mp3"></audio>
</div>

<script>
const boardEl=document.getElementById("board");
const msgEl=document.getElementById("msg");
const timerEl=document.getElementById("timer");
const resetBtn=document.getElementById("reset");
let board,turn,names,mode,aiLevel,locked,timer,interval;

const wins=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];

function start(){
  names=[p1.value,p2.value];
  mode=modeSel.value;
  aiLevel=level.value;
  locked=true;
  setup.classList.add("hidden");
  resetBtn.classList.remove("hidden");
  board=Array(9).fill("");
  turn=0;
  draw();
  nextTurn();
}

function draw(){
  boardEl.innerHTML="";
  board.forEach((v,i)=>{
    const c=document.createElement("div");
    c.className="cell"+(v?" disabled":"");
    c.textContent=v;
    c.onclick=()=>move(i);
    boardEl.appendChild(c);
  });
}

function move(i){
  if(board[i]||!locked) return;
  board[i]=turn? "O":"X";
  sndTurn.play();
  draw();
  if(checkWin()) return;
  turn^=1;
  nextTurn();
}

function nextTurn(){
  msgEl.textContent=names[turn];
  startTimer();
  if(mode==="ai"&&turn===1) setTimeout(aiMove,500);
}

function startTimer(){
  clearInterval(interval);
  timer=10;
  timerEl.textContent=`‚è± ${timer}`;
  interval=setInterval(()=>{
    timer--;
    timerEl.textContent=`‚è± ${timer}`;
    if(timer<=0){
      sndWarn.play();
      turn^=1;
      nextTurn();
    }
  },1000);
}

function checkWin(){
  for(const w of wins){
    if(w.every(i=>board[i]&&board[i]===board[w[0]])){
      w.forEach(i=>boardEl.children[i].classList.add("win"));
      msgEl.textContent=`üèÜ ${names[turn]} WINS`;
      sndWin.play();
      locked=false;
      clearInterval(interval);
      return true;
    }
  }
  if(board.every(v=>v)){
    msgEl.textContent="DRAW";
    locked=false;
    clearInterval(interval);
    return true;
  }
  return false;
}

function aiMove(){
  let i;
  if(aiLevel==="easy") i=random();
  else if(aiLevel==="hard") i=smart();
  else i=minimax(board,true).i;
  move(i);
}

function random(){
  return board.map((v,i)=>v?null:i).filter(v=>v!=null)[Math.random()*9|0];
}
function smart(){
  return random();
}
function minimax(b,max){
  if(check(b,"O")) return {s:1};
  if(check(b,"X")) return {s:-1};
  if(b.every(v=>v)) return {s:0};
  let best={s:max?-99:99};
  b.forEach((v,i)=>{
    if(!v){
      b[i]=max?"O":"X";
      let r=minimax(b,!max);
      b[i]="";
      r.i=i;
      if(max? r.s>best.s:r.s<best.s) best=r;
    }
  });
  return best;
}
function check(b,p){return wins.some(w=>w.every(i=>b[i]===p))}

resetBtn.onclick=()=>location.reload();
start.onclick=start;
</script>
</body>
</html>

