<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Minta</title>
<style>
html, body {
	margin: 0;
	height: 100%;
	overflow: hidden;
	font-family: Arial, sans-serif;
	color: #fff;
	background: #050505;
}

#matrix {
	position: fixed;
	inset: 0;
	z-index: 0;
}

#gradient {
	position: fixed;
	inset: 0;
	z-index: 1;
	pointer-events: none;
	background:
		radial-gradient(circle at 20% 30%, rgba(0,0,255,0.25), transparent 42%),
		radial-gradient(circle at 80% 40%, rgba(0,255,0,0.25), transparent 45%),
		radial-gradient(circle at 50% 80%, rgba(255,0,0,0.25), transparent 48%);
	transition: background 0.12s linear;
}

#gate {
	position: fixed;
	inset: 0;
	background: rgba(0,0,0,0.9);
	display: flex;
	align-items: center;
	justify-content: center;
	z-index: 5;
}

#gate button {
	font-size: 20px;
	padding: 16px 30px;
	border-radius: 6px;
	background: #00ccff;
	color: #fff;
	border: none;
	cursor: pointer;
}

#content {
	position: relative;
	z-index: 3;
	padding: 40px;
	pointer-events: none;
	filter: blur(6px);
}

.btn {
	padding: 10px 20px;
	font-size: 16px;
	background: #cc1515;
	color: #fff;
	border: none;
	border-radius: 5px;
	cursor: pointer;
	margin-top: 20px;
}

#progressWrap {
	width: 320px;
	height: 10px;
	background: #333;
	border-radius: 5px;
	margin-top: 18px;
	overflow: hidden;
}

#progressBar {
	width: 0%;
	height: 100%;
	background: linear-gradient(90deg, #00ffcc, #00aaff);
}

#timer {
	position: fixed;
	top: 20px;
	right: 20px;
	font-size: 18px;
	z-index: 10;
	color: rgb(226, 230, 226);
}
</style>
</head>
<body>

<canvas id="matrix"></canvas>
<div id="gradient"></div>

<div id="gate">
	<button id="enterBtn">Click to Enter</button>
</div>

<div id="content">
	<h1>Hi</h1>
	<p>I'm Minta</p>

	<button id="mainBtn" class="btn">Click me</button>

	<div id="progressWrap">
		<div id="progressBar"></div>
	</div>

	<audio id="bgm" src="Stranger.mp3" loop></audio>
	<audio id="mainSound" src="the_best_song.mp3" preload="auto"></audio>
</div>

<div id="timer">Time on page: 0s</div>

<script>

const canvas = document.getElementById("matrix");
const ctx = canvas.getContext("2d");
let w, h, cols;
const fontSize = 16;
let drops = [];
const chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZйцукенгшщзхъфывапролджэячсмитьбю#!?$%&@";

function resize() {
	w = canvas.width = innerWidth;
	h = canvas.height = innerHeight;
	cols = Math.floor(w / fontSize);
	drops = Array(cols).fill(1);
}
addEventListener("resize", resize);
resize();

setInterval(() => {
	ctx.fillStyle = "rgba(0,0,0,0.08)";
	ctx.fillRect(0, 0, w, h);

	ctx.fillStyle = "#00ff41";
	ctx.font = fontSize + "px monospace";

	for (let i = 0; i < drops.length; i++) {
		const t = chars[Math.floor(Math.random() * chars.length)];
		ctx.fillText(t, i * fontSize, drops[i] * fontSize);
		if (drops[i] * fontSize > h && Math.random() > 0.975) drops[i] = 0;
		drops[i]++;
	}
}, 33);

const gate = document.getElementById("gate");
const enterBtn = document.getElementById("enterBtn");
const content = document.getElementById("content");
const btn = document.getElementById("mainBtn");
const bgm = document.getElementById("bgm");
const main = document.getElementById("mainSound");
const bar = document.getElementById("progressBar");
const gradient = document.getElementById("gradient");

let unlocked = false;
let playing = false;

enterBtn.onclick = () => {
	if (unlocked) return;
	unlocked = true;
	gate.remove();
	content.style.pointerEvents = "auto";
	content.style.filter = "none";
	bgm.volume = 1;
	bgm.play().catch(()=>{});
};

btn.onclick = () => {
	if (!unlocked || playing) return;

	playing = true;
	btn.disabled = true;
	bgm.pause();

	const a = document.createElement("a");
	a.href = "MicroBit.zip";  
	a.download = "MicroBit.zip";
	document.body.appendChild(a);
	a.click();
	a.remove();

	main.currentTime = 0;
	main.play().catch(() => {
		playing = false;
		btn.disabled = false;
	});
};

main.addEventListener("timeupdate", () => {
	if (!main.duration) return;
	const p = main.currentTime / main.duration;
	bar.style.width = (p * 100) + "%";

	const bx = 20 + Math.sin(p * Math.PI * 2) * 18;
	const gx = 80 + Math.cos(p * Math.PI * 2) * 18;
	const ry = 75 + Math.sin(p * Math.PI) * 20;
	const glow = 0.25 + Math.sin(p * Math.PI * 4) * 0.15;

	gradient.style.background =
		`radial-gradient(circle at ${bx}% 30%, rgba(0,0,255,${glow}), transparent 42%),
		 radial-gradient(circle at ${gx}% 40%, rgba(0,255,0,${glow}), transparent 45%),
		 radial-gradient(circle at 50% ${ry}%, rgba(255,0,0,${glow}), transparent 48%)`;
});

main.onended = () => {
	bar.style.width = "0%";
	bgm.currentTime = 0;
	bgm.play().catch(()=>{});
	playing = false;
	btn.disabled = false;
};

let secondsOnPage = 0;
const timerEl = document.getElementById("timer");

setInterval(() => {
	secondsOnPage++;
	const mins = Math.floor(secondsOnPage / 60);
	const secs = secondsOnPage % 60;
	timerEl.textContent = `Time on page: ${mins}m ${secs}s`;
}, 1000);

window.addEventListener("beforeunload", () => {
	console.log("User spent", secondsOnPage, "seconds on page");
});
</script>

</body>
</html>

